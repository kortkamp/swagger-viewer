<html>
    <head>    
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.10.3/swagger-ui.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.10.3/swagger-ui-bundle.js"></script>
        <script>

            function render() {
                const params = new URLSearchParams(window.location.search)
                const url = params.get('host')
                if(url){
                    var input = document.getElementsByClassName("sv-main");
                    input[0].classList.add('hidden')
                    var ui = SwaggerUIBundle({
                        url,
                        dom_id: '#swagger-ui',
                        presets: [
                            SwaggerUIBundle.presets.apis,
                            SwaggerUIBundle.SwaggerUIStandalonePreset
                        ]
                    });
                }
            }

            function validateForm(){
                
                let host = document.forms["sv-form"]["host"].value;
                if (!host) {
                    var input = document.getElementById("host-url-input")
                    input.classList.remove("alert"); 

                    // trigger a DOM reflow 
                    void input.offsetWidth; 

                    input.classList.add("alert");
                    
                    return false;
                }
            }

        </script>
        <style>
            body {
                background-color: #fbfcfc;
            }
            .sv-main {
                margin: 0 auto;
                width: fit-content;
               
            }
            .sv-main  input {
                border-radius: 4px;
                padding: 1rem px 3rem;
                font-size: 1.2rem;
                line-height: 1.375rem;
            }
            .sv-title {
                margin: 100px auto;
                padding-top: 30px;
                text-align: center;
                font-size: 4rem;
                font-weight: 600;
            }
            
            .sv-form{
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 20px;
            }
            .host-input {
                width: 500px;
                padding: 8;
                color: #173647;
                background: 0 0;
                border:1px solid #298e35;
                
                resize: none;
                outline: none;
            }

            .host-input:focus,.host-input:hover{
                box-shadow: 0 0 5px rgb(50 113 184 / 50%);
            }
        
            .submit-url-button {
                margin: 0 auto;
                width: 150px;
                color: #fff;
                background-color: #38b832;
                border: 1px solid transparent;
                padding: 8px 19px;
                font-size: 1rem;
                line-height: 1.375rem;

                transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;
            }

            .submit-url-button:hover{
               background-color: #298e35;
               color: #fff;
               border-color: #298e35;
           }

           .hidden {
               display: none;
           }
           .alert::placeholder { /* Chrome, Firefox, Opera, Safari 10.1+ */
                color: red;
                transition: color .5s;
                opacity: 0.7; /* Firefox */
            }

            .alert {              
                animation: shake .2s;
                animation-iteration-count: 2;
            }
            @keyframes shake {
                0% {margin-left: 0;}
                25% {margin-left: 5px;}
                50% {margin-left: 0;}
                75% {margin-left: -5px;}
                100% {margin-left: 0;}
            }
            @keyframes color2 {
                0% {color: black;}
                25% {color: red;}
                100% {color: black;}
            }

            @media screen and (max-width: 1080px){
                html{
                    font-size: 150%;
                }
                .host-input {
                    width: 90vw;
                }
                .sv-main input {
                    padding: 19px 19px;
                    font-size: 1.8rem;
                    width: 100%;
                }
            }

        </style>
    </head>

    <body onload="render()">
        <div id="swagger-ui"></div>
        <div class="sv-main">
            <div class="sv-title">
                <p>
                    {Swagger Viewer}
                </p>
            </div>
            <form class="sv-form" name="sv-form" action="./" method="get" onsubmit="return validateForm()">
                <input type="url" name="host" class="host-input" id="host-url-input" placeholder="Swagger file url">
                <input type="submit" class="submit-url-button" value="Render">
            </form>
        </div>
    </body>
</html>